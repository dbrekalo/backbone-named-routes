!function($,s,t){"use strict";var o,i={routes:{}},n={pushState:!1,root:""},u={},r=window.location.protocol+"//"+window.location.host,w=/\((.*?)\)|(\(\?)?:\w+|\*\w+/g,f=/\((.*?)\)/g,l=/\:\w+/,g=/\(|\)/g,c=t.memoize(function(t){return t.replace(/\/$/,"")}),a=t.memoize(function(e,t){return e.slice(0,t.length)===t},function(t,e){return t+":"+e}),p=function(n,e){return n+(e?t.isArray(e)?":"+e.join(":"):":"+t.toArray(arguments).slice(1).join(":"):"")},e={register:function(n,r,o){return"string"==typeof n?(i.routes[n]=r,i[r]=o,u[r]=n):(i=n,t.each(i.routes,function(t,e){u[t]=e})),e},get:t.memoize(function(i,o){var e=u[i];return!t.isArray(o)&&(o=t.toArray(arguments).slice(1)),o.length&&(e=e.replace(w,function(e){var t=o.shift();return t?a(e,"(")?e.replace(l,t).replace(g,""):t:""})),e=e.replace(f,""),e.length?n.pushState?r+n.root+e:r+c(n.root)+"#"+e:r+c(n.root)},p),getWithQueryString:function(r,t,n){return 2===arguments.length&&(n=t,t=[]),e.get(r,t)+"?"+$.param(n)},navigate:function(){o.navigate.apply(o,arguments)},navigateToAlias:function(t,n,r){e.navigateToLink(e.get(t,n),r)},navigateToLink:function(e,u){var t=e instanceof $?e.attr("href"):e,i=c(n.root);a(t,r)&&(t=t.replace(r,"")),a(t,i)&&(t=t.replace(i,"")),a(t,"/")&&(t=t.slice(1)),!n.pushState&&a(t,"#")&&(t=t.slice(1)),o.navigate(t,{trigger:!!u})},start:function(t){var r=s.Router.extend(i);return o=new r,t&&e.setOptions(t),s.history.start(n),e},setOptions:function(t){return n=$.extend(n,t),e},setBaseUrl:function(t){return r=t,e},getOriginalRouter:function(){return o},getQueryParam:function(e){var n=window.location.search;if(n){var r=t.object(t.map(n.substring(1).split("&"),function(t){return t.split("=")}));return e?r[e]:r}}};$.wk=$.wk||{},$.wk.router=e}(window.jQuery||window.Zepto,window.Backbone,window._);