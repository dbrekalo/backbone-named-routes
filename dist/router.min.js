!function(i,g,n){"use strict";var a,o={routes:{}},t={pushState:!1,root:""},s={},r=window.location.protocol+"//"+window.location.host,l=/\((.*?)\)|(\(\?)?:\w+|\*\w+/,w=/\((.*?)\)/g,c=n.memoize(function(t){return t.replace(/\/$/,"")}),u=n.memoize(function(e,t){return e.slice(0,t.length)===t}),e={register:function(t,r,i){return"string"==typeof t?(o.routes[t]=r,o[r]=i,s[r]=t):(o=t,n.each(o.routes,function(t,e){s[t]=e})),e},get:function(i,o){var e=s[i];return o&&!n.isArray(o)&&(o=n.toArray(arguments).slice(1)),o&&o.length&&n.each(o,function(t){n.isObject(t)||(e=e.replace(l,t))}),e=e.replace(w,""),e.length?t.pushState?r+t.root+e:r+c(t.root)+"#"+e:r+c(t.root)},navigate:function(){a.navigate.apply(a,arguments)},navigateToAlias:function(t,n,r){e.navigateToLink(e.get(t,n),r)},navigateToLink:function(n,s){var e=n instanceof i?n.attr("href"):n,o=c(t.root);u(e,r)&&(e=e.replace(r,"")),u(e,o)&&(e=e.replace(o,"")),u(e,"/")&&(e=e.slice(1)),!t.pushState&&u(e,"#")&&(e=e.slice(1)),a.navigate(e,{trigger:!s})},start:function(n){var r=g.Router.extend(o);return a=new r,n&&e.setOptions(n),g.history.start(t),e},setOptions:function(n){return t=i.extend(t,n),e},setBaseUrl:function(t){return r=t,e},getOriginalRouter:function(){return a}};i.wk=i.wk||{},i.wk.router=e}(window.jQuery||window.Zepto,window.Backbone,window._);