!function(r,u){"use strict";var a,e={routes:{}},n={pushState:!1,root:""},o={},s=/\((.*?)\)|(\(\?)?:\w+|\*\w+/,i=Array.prototype.slice,t={register:function(n,r,a){return"string"==typeof n?(e.routes[n]=r,e[r]=a,o[r]=n):(e=n,_.each(e.routes,function(t,e){o[t]=e})),t},get:function(r){var e=i.call(arguments,1),t=o[r];return e.length&&_.each(e,function(e){_.isObject(e)||(t=t.replace(s,e))}),n.root+t},navigate:function(){a.navigate.apply(a,arguments)},navigateToAlias:function(){var e=t.get.apply(t,arguments).substring(n.root.length),r=i.call(arguments,0).pop();_.isObject(r)?t.navigate(e,r):t.navigate(e)},start:function(r){var o=u.Router.extend(e);return a=new o,r&&t.setOptions(r),u.history.start(n),t},setOptions:function(e){return n=r.extend(n,e),t}};r.wk=r.wk||{},r.wk.router=t}(jQuery||Zepto,Backbone);