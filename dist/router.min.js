!function(a,c,r){"use strict";var u,o={routes:{}},n={pushState:!1,root:""},s={},i=window.location.protocol+"//"+window.location.host,l=/\((.*?)\)|(\(\?)?:\w+|\*\w+/,g=Array.prototype.slice,e=function(t){e.cache=e.cache||{};var n=e.cache[t];return"undefined"!=typeof n?n:n=t.length&&"/"===t.substring(t.length-1)?t.substring(0,t.length-1):t},t={register:function(n,e,a){return"string"==typeof n?(o.routes[n]=e,o[e]=a,s[e]=n):(o=n,r.each(o.routes,function(t,n){s[t]=n})),t},get:function(a){var o=g.call(arguments,1),t=s[a];return o.length&&r.each(o,function(n){r.isObject(n)||(t=t.replace(l,n))}),t.length?n.pushState?i+n.root+t:i+e(n.root)+"#"+t:i+e(n.root)},navigate:function(){u.navigate.apply(u,arguments)},navigateToAlias:function(){var e=t.get.apply(t,arguments).substring(n.root.length),o=g.call(arguments,0).pop();r.isObject(o)?t.navigate(e,o):t.navigate(e)},start:function(e){var r=c.Router.extend(o);return u=new r,e&&t.setOptions(e),c.history.start(n),t},setOptions:function(e){return n=a.extend(n,e),t}};a.wk=a.wk||{},a.wk.router=t}(window.jQuery||window.Zepto,window.Backbone,window._);