!function(i,s,c){"use strict";var a,r={routes:{}},t={pushState:!1,root:""},u={},o=window.location.protocol+"//"+window.location.host,w=/\((.*?)\)|(\(\?)?:\w+|\*\w+/,e=function(t){e.cache=e.cache||{};var n=e.cache[t];return"undefined"!=typeof n?n:n=t.length&&"/"===t.substring(t.length-1)?t.substring(0,t.length-1):t},g=function(n,t){return n.slice(0,t.length)===t},n={register:function(t,e,o){return"string"==typeof t?(r.routes[t]=e,r[e]=o,u[e]=t):(r=t,c.each(r.routes,function(t,n){u[t]=n})),n},get:function(i,r){var n=u[i];return r&&r.length&&c.each(r,function(t){c.isObject(t)||(n=n.replace(w,t))}),n.length?t.pushState?o+t.root+n:o+e(t.root)+"#"+n:o+e(t.root)},navigate:function(){a.navigate.apply(a,arguments)},navigateToAlias:function(t,e,o){n.navigateToLink(n.get(t,e),o)},navigateToLink:function(e,r){var n=e instanceof i?e.attr("href"):e;g(n,o)&&(n=n.replace(o,"")),g(n,t.root)&&(n=n.replace(t.root,"")),a.navigate(n,{trigger:!r})},start:function(e){var o=s.Router.extend(r);return a=new o,e&&n.setOptions(e),s.history.start(t),n},setOptions:function(e){return t=i.extend(t,e),n}};i.wk=i.wk||{},i.wk.router=n}(window.jQuery||window.Zepto,window.Backbone,window._);