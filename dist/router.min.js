!function(u,g,e){"use strict";var i,o={routes:{}},t={pushState:!1,root:""},c={},r=window.location.protocol+"//"+window.location.host,f=/\((.*?)\)|(\(\?)?:\w+|\*\w+/g,l=/\((.*?)\)/g,s=e.memoize(function(t){return t.replace(/\/$/,"")}),a=e.memoize(function(n,t){return n.slice(0,t.length)===t},function(t,n){return t+":"+n}),w=function(n,t){return n+(t?e.isArray(t)?":"+t.join(":"):":"+e.toArray(arguments).slice(1).join(":"):"")},n={register:function(t,r,i){return"string"==typeof t?(o.routes[t]=r,o[r]=i,c[r]=t):(o=t,e.each(o.routes,function(t,n){c[t]=n})),n},get:e.memoize(function(i,o){var n=c[i];return o&&(!e.isArray(o)&&(o=e.toArray(arguments).slice(1)),o.length&&(n=n.replace(f,function(n){var t=o.shift();return t?a(n,"(/")?"/"+t:t:""}))),n=n.replace(l,""),n.length?t.pushState?r+t.root+n:r+s(t.root)+"#"+n:r+s(t.root)},w),navigate:function(){i.navigate.apply(i,arguments)},navigateToAlias:function(t,e,r){n.navigateToLink(n.get(t,e),r)},navigateToLink:function(e,c){var n=e instanceof u?e.attr("href"):e,o=s(t.root);a(n,r)&&(n=n.replace(r,"")),a(n,o)&&(n=n.replace(o,"")),a(n,"/")&&(n=n.slice(1)),!t.pushState&&a(n,"#")&&(n=n.slice(1)),i.navigate(n,{trigger:!!c})},start:function(e){var r=g.Router.extend(o);return i=new r,e&&n.setOptions(e),g.history.start(t),n},setOptions:function(e){return t=u.extend(t,e),n},setBaseUrl:function(t){return r=t,n},getOriginalRouter:function(){return i}};u.wk=u.wk||{},u.wk.router=n}(window.jQuery||window.Zepto,window.Backbone,window._);